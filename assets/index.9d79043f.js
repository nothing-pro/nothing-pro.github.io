var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n;import{r as s,o as a,c,a as i,w as l,T as d,b as u,d as m,K as p,e as h,f,g as E,n as N,h as T,i as O,j as _,k as y,l as R}from"./vendor.8a3485b9.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var g={namespaced:!0,state:{key:void 0},getters:{key:e=>e.key},mutations:{SET_KEY:(e,t)=>{e.key=t}},actions:{Key({commit:e},t){e("SET_KEY",t)}}};const I={},v=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in I)return;I[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},k={class:"h-screen w-screen flex flex-col"},C={setup:e=>(e,t)=>{const o=s("router-view");return a(),c("div",k,[i(o,null,{default:l((({Component:e})=>[i(d,{name:"slide-down",appear:""},{default:l((()=>[(a(),u(p,null,[(a(),u(m(e)))],1024))])),_:2},1024)])),_:1})])}},w={class:"flex flex-col items-center justify-center text-white h-full bg-gradient-to-tl from-primary-500 via-primary-800 to-primary-900"},S=E("div",{class:"flex flex-row text-center mb-10 text-primary-600 hover:text-primary-800"},[E("span",{class:"text-5xl text-shadow transition-all duration-500 cursor-pointer inline-block"},"Powered By NothingJs"),E("sup",{class:"transition-all duration-500"},"敬请期待...")],-1),j=[{path:"/",name:"Root",redirect:"/welcome/index",meta:{hidden:!0}},{path:"/error",name:"Error",component:C,redirect:"/error/404",meta:{hidden:!0},children:[{path:"404",name:"Error404",meta:{},component:()=>v((()=>import("./404.322f401f.js")),["assets/404.322f401f.js","assets/vendor.8a3485b9.js"])},{path:"401",name:"Error401",meta:{},component:()=>v((()=>import("./401.94d2d983.js")),["assets/401.94d2d983.js","assets/vendor.8a3485b9.js"])}]},{path:"/welcome",name:"Welcome",component:C,redirect:"/welcome/index",meta:{icon:"&#xED59;",title:"欢迎页面"},children:[{path:"index",name:"WelcomeIndex",meta:{},component:{setup(e){const t=h(null),o=h(!1),n=[["","74l","o1QFsO3","7DDkMKz","6BM","5XClmg5esKU","67DgsO8JkE","PcK0","q3CjsKk","qHCnzHDsVsORMO4AEMY","7pFRydx","q5fSMOMTsOnLMOe","7UF","43DnCgQ","7t5","pjCgU8R","oTCkHjCmULDkcOy","5vCq8O5","qYG","5cr","onConspA8K4","73CtnXDnWPCj3fCnUvCtVHDqXZVfjdJ","qfDjsK6","48B","q8Z","orDiMKjYiot","4XDkxoC","qVcaUZK","4TDosOzWRLCv8Ko","poyG13DrcKLXmAX","rAu","58Eck07dMOhHMKxYcOS","qDCu8ODB8KbfMOB","4lu","qnCuQjDph0T","7TCqsO2ZGVS","qzCnMOjbB7CssKMZsKRZ","nCt8K8VsK9CsKSPhVTC","","NH33ChsKAD8OG","6ov","r44","4tUMzQ1VxRYWsOU","pPDgMKV","4cgIcKeasOs","pd/","5pr","5bDisOY","5ki","6Qj","6Uk","6jDq8OvNjo8P0Btb3Bz","oLCg8KF","ofCiA=="],["","5cB","7UC","5fCo3jCpUksdUZ3","7IQAcKndRACfsOeA2JV","50F","qNV","qMrAsKPLBAa","5cB","7UC","5cB","7XCgQ=="]];return f((()=>{const e=document.createElement("canvas");t.value.append(e);const r=new NOTHING.App(e),s={webgl1:!1,msaa:8,sec:{d:n[0].join("w"),s:n[1].join("w")},preset:"/assets/index.json"},a=new NOTHING.AppWorkerProxy("/js/nothing.apprenderer.worker.min.js",s),c=new NOTHING.AppWorkerProxy("/js/nothing.appinputs.min.js");r.canvas.style.width="100%",r.canvas.style.height="100%",async function(){await r.addProxy(NOTHING.RENDERER,a),await r.addProxy(NOTHING.INPUTS,c),r.store(NOTHING.INPUTS,{module:"input",action:"receiveFromLocal",options:{canvas:r.canvas}}),r.store(NOTHING.INPUTS,{module:"input",action:"attachToRenderer"}),r.store(NOTHING.RENDERER,{module:"app",action:"use",options:{url:"/js/nothing.standard.min.js",initFunc:"nothingStandard"}}),r.store(NOTHING.RENDERER,{module:"app",action:"use",options:{url:"/js/nothing.posteffect.min.js",initFunc:"nothingPostEffect"}}),r.store(NOTHING.RENDERER,{module:"app",action:"load",options:{url:"/model/scene.n",sec:{d:n[0].join("w"),s:n[1].join("w")}}}),r.store(NOTHING.RENDERER,{module:"app",action:"render"}),r.commit(NOTHING.INPUTS),r.commit(NOTHING.RENDERER),setTimeout((async()=>{await r.store(NOTHING.RENDERER,{module:"camera",action:"reset"}),await r.store(NOTHING.RENDERER,{module:"camera",action:"rotateSpeed",options:{x:-2,y:0,accX:2,accY:0}}),r.commit(NOTHING.RENDERER),o.value=!0}),1e3)}()})),(e,n)=>(a(),c("section",w,[E("div",{ref:(e,o)=>{o.web3d=e,t.value=e},class:N([o.value?"visible":"invisible","flex flex-row bg-blue-400 m-10 h-full w-5/6 shadow-2xl"])},null,2),S]))}}}]}],D=T({routes:j,history:O()}),A=[];function x(e,s){const a=[];return e.forEach((e=>{const c=((e,s)=>{for(var a in s||(s={}))o.call(s,a)&&r(e,a,s[a]);if(t)for(var a of t(s))n.call(s,a)&&r(e,a,s[a]);return e})({},e);(function(e,t){return!t.meta||!t.meta.roles||t.meta.roles.every((t=>e.includes(t)))})(s,c)&&(c.children&&(c.children=x(c.children,s)),a.push(c))})),a}function b(e){void 0===e?localStorage.removeItem("com.zhoyq.token"):localStorage.setItem("com.zhoyq.token",e)}function G(e){void 0===e?localStorage.removeItem("com.zhoyq.refreshToken"):localStorage.setItem("com.zhoyq.refreshToken",e)}let H;H={AUTH_CENTER:"http://localhost:7777",HOME_URL:"http://localhost:9080",GATEWAY_REST:"http://localhost:5556",AUTH_MANAGEMENT:"http://localhost:10002",MODEL_MANAGEMENT:"http://localhost:10004",COMMENT_MANAGEMENT:"http://localhost:10020",BLOG_MANAGEMENT:"http://localhost:10003",CONFIG_MANAGEMENT:"http://localhost:8899",CLIENT_ID:"default_guest",CLIENT_SECRET:"guest"};const M=H.AUTH_CENTER,P=H.CLIENT_ID,K=H.CLIENT_SECRET,U=H.HOME_URL;function q(){const e=localStorage.getItem("com.zhoyq.refreshToken");return fetch(`${M}/oauth/token?grant_type=refresh_token&client_id=${P}&client_secret=${K}&refresh_token=${e}`,{method:"post",mode:"cors"}).then((e=>e.json()))}function L(){return new Promise(((e,t)=>{const o=localStorage.getItem("com.zhoyq.token");if(o){const n=o.split(".");if(3===n.length){JSON.parse(atob(n[1])).exp>(new Date).getTime()/1e3?e(JSON.parse(atob(n[1]))):q().then((o=>{if(o.access_token){b(o.access_token);const t=o.access_token.split(".");e(JSON.parse(atob(t[1])))}else t(new Error("userInfo: token is out of date !"))}))}else t(new Error("userInfo: token is incorrect !"))}else t(new Error("userInfo : no token can be used !"))}))}var z={namespaced:!0,state:{routes:j,dynamicRoutes:void 0,userInfo:void 0},getters:{userInfo:e=>e.userInfo,routes:e=>e.routes},mutations:{SET_ROUTERS:(e,t)=>{e.dynamicRoutes=t,e.routes=j.concat(t)},SET_USER_INFO:(e,t)=>{e.userInfo=t}},actions:{GetTokenWithCode(e,t){const{code:o}=t;return new Promise(((e,t)=>{(function(e){return fetch(`${M}/oauth/token?grant_type=authorization_code&code=${e}&client_id=${P}&redirect_uri=${encodeURIComponent(U)}&client_secret=${K}`,{method:"post",mode:"cors"}).then((e=>e.json()))})(o).then((o=>{o.access_token?(b(o.access_token),o.refresh_token&&G(o.refresh_token),e(o.refresh_token)):t(new Error("GetTokenWithCode : no access_token !"))})).catch((e=>{t(e)}))}))},GetOauthInfo:({commit:e})=>new Promise(((t,o)=>{L().then((n=>{n?(e("SET_USER_INFO",n),t(n)):o(new Error("getInfo: roles must be a non-null array !"))})).catch((e=>{b(void 0),o(e)}))})),GenerateRoutes:({commit:e},t)=>new Promise((o=>{const{roles:n}=t,r=x(A,n);e("SET_ROUTERS",r),o(void 0)})),FedLogOut:()=>new Promise((e=>{b(void 0),G(void 0),e(void 0)}))}};const B=_({modules:{setting:{namespaced:!0,state:{hash:location.hash},getters:{hash:e=>e.hash},mutations:{SET_HASH:(e,t)=>{e.hash=t}},actions:{Hash({commit:e},t){e("SET_HASH",t)}}},sample:g,auth:z},strict:!1,plugins:[y()]});var V=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o};const F=R(V({},[["render",function(e,t){const o=s("router-view");return a(),u(o)}]]));F.use(D),F.use(B),D.isReady().then((()=>{F.mount("#app")}));export{V as _};
